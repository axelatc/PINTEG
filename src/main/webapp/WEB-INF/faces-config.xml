<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="2.3" xmlns="http://xmlns.jcp.org/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
    http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_3.xsd">
    <!-- login -->
    <navigation-rule>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/dashboard.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/login.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>

    <!-- Register -->
    <navigation-rule>
        <from-view-id>/register.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/login.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/register.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>

    <!--  Manage account  -->
    <navigation-rule>
        <from-view-id>/app/*</from-view-id>
        <navigation-case>
            <from-outcome>accountConsult</from-outcome>
            <to-view-id>/app/myaccount/accountConsult.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/myaccount/accountConsult.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>accountEdit</from-outcome>
            <to-view-id>/app/myaccount/accountEdit.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/myaccount/accountEdit.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{personalAccount.saveEdit}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/myaccount/accountConsult.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{personalAccount.saveEdit}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/myaccount/accountConsult.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/myaccount/accountConsult.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{personalAccount.deactivate}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/login.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{personalAccount.deactivate}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/myaccount/accountConsult.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>

    <!--  Manage users  -->
    <navigation-rule>
        <from-view-id>/*</from-view-id>
        <navigation-case>
            <from-outcome>userList</from-outcome>
            <to-view-id>/app/users/userList.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>userCreate</from-outcome>
            <to-view-id>/app/users/userCreate.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/users/userList.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>userEdit</from-outcome>
            <to-view-id>/app/users/userEdit.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{userList.delete(user)}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/users/userList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{userList.delete(user)}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/users/userList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/users/userEdit.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{userEdit.save}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/users/userList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{userEdit.save}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/users/userEdit.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/users/userCreate.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{userCreate.save}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/users/userList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{userCreate.save}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/users/userCreate.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/users/userList.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{userList.deactivate(user)}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/userList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{userList.deactivate(user)}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/userList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>

    <!--  Role CRUD  -->
    <navigation-rule>
        <from-view-id>/*</from-view-id>
        <navigation-case>
            <from-outcome>roleList</from-outcome>
            <to-view-id>/app/roles/roleList.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>roleCreate</from-outcome>
            <to-view-id>/app/roles/roleCreate.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/roles/roleList.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>roleEdit</from-outcome>
            <to-view-id>/app/roles/roleEdit.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{roleList.delete(role)}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/roles/roleList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{roleList.delete(role)}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/roles/roleList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/roles/roleEdit.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{roleEdit.save}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/roles/roleList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{roleEdit.save}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/roles/roleEdit.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/roles/roleCreate.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{roleCreate.save}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/roles/roleList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{roleCreate.save}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/roles/roleCreate.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>

    <!--  Measurand CRUD  -->
    <navigation-rule>
        <from-view-id>/*</from-view-id>
        <navigation-case>
            <from-outcome>measurandList</from-outcome>
            <to-view-id>/app/measurands/measurandList.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>measurandCreate</from-outcome>
            <to-view-id>/app/measurands/measurandCreate.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/measurands/measurandList.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>measurandEdit</from-outcome>
            <to-view-id>/app/measurands/measurandEdit.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{measurandList.delete(measurand)}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/measurands/measurandList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{measurandList.delete(measurand)}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/measurands/measurandList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/measurands/measurandEdit.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{measurandEdit.save}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/measurands/measurandList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{measurandEdit.save}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/measurands/measurandEdit.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/app/measurands/measurandCreate.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{measurandCreate.save}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/measurands/measurandList.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{measurandCreate.save}</from-action>
            <from-outcome>failure</from-outcome>
            <to-view-id>/app/measurands/measurandCreate.xhtml</to-view-id>
            <redirect></redirect>
        </navigation-case>
    </navigation-rule>    

    <lifecycle>
        <phase-listener>com.atc.listeners.PostRedirectGetListener</phase-listener>
    </lifecycle>

    <application>
        <locale-config>
            <default-locale>fr</default-locale>
            <supported-locale>en</supported-locale>
        </locale-config>
        <resource-bundle>
            <base-name>com.atc.i18n.messages</base-name>
            <var>bundle</var>
        </resource-bundle>
    </application>
</faces-config>
