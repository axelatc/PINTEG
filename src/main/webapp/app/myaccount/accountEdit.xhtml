<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">>

<ui:composition template="/WEB-INF/templates/userTemplate.xhtml">
    <ui:define name="title">
        #{bundle['accountEdit.pageTitle']}
    </ui:define>

    <ui:define name="content">
        <h1 class="display-1">#{bundle['accountEdit.pageTitle']}</h1>
        <ui:include src="/WEB-INF/includes/InfoAndErrorMessages.xhtml" />
        <h:form rendered="#{not empty personalAccount.userToEdit}" id="personalAccountEditForm">
            <div class="mb-3">
                <h:outputLabel for="firstName"
                               styleClass="form-label">#{bundle['accountEdit.firstName.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.firstName}"
                             id="firstName"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="true"
                             requiredMessage="#{bundle['accountEdit.firstName.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.firstName.validationMessage']}">
                    <f:validateLength minimum="1" maximum="100"/>
                </h:inputText>
                <h:message for="firstName" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="lastName"
                               styleClass="form-label">#{bundle['accountEdit.lastName.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.lastName}"
                             id="lastName"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="true"
                             requiredMessage="#{bundle['accountEdit.lastName.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.lastName.validationMessage']}">
                    <f:validateLength minimum="1" maximum="100"/>
                </h:inputText>
                <h:message for="lastName" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="username"
                               styleClass="form-label">#{bundle['accountEdit.username.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.username}"
                             id="username"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="true"
                             requiredMessage="#{bundle['accountEdit.username.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.username.validationMessage']}">
                    <f:validateLength minimum="1" maximum="100"/>
                </h:inputText>
                <h:message for="username" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="password"
                               styleClass="form-label">#{bundle['accountEdit.password.inputLabel']}</h:outputLabel>
                <h:inputSecret value="#{personalAccount.userToEdit.password}"
                               id="password"
                               styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                               required="true"
                               requiredMessage="#{bundle['accountEdit.password.requiredMessage']}"
                               validatorMessage="#{bundle['accountEdit.password.validationMessage']}">
                    <f:validateLength minimum="6" maximum="255"/>
                    <f:validateRegex
                            pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,255})" />
                </h:inputSecret>
                <h:message for="password" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="birthdate"
                               styleClass="form-label">#{bundle['accountEdit.birthdate.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.birthdate}"
                             a:type="date"
                             a:min="1900-01-01"
                             a:max="#{personalAccount.today}"
                             id="birthdate"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="true"
                             requiredMessage="#{bundle['accountEdit.birthdate.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.birthdate.validationMessage']}">
                    <f:convertDateTime type="localDate" pattern="yyyy-MM-dd"/>
                </h:inputText>
                <h:message for="birthdate" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="gender"
                               styleClass="form-label">#{bundle['accountEdit.gender.inputLabel']}</h:outputLabel>
                <h:selectOneMenu value="#{personalAccount.userToEdit.gender}"
                                 id="gender"
                                 styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                                 required="true"
                                 requiredMessage="#{bundle['accountEdit.gender.requiredMessage']}"
                                 validatorMessage="#{bundle['accountEdit.gender.validationMessage']}">
                    <f:selectItems value="#{personalAccount.genders}" />
                </h:selectOneMenu>
                <h:message for="gender" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="emailAddress"
                               styleClass="form-label">#{bundle['accountEdit.emailAddress.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.emailAddress}"
                             id="emailAddress"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="true"
                             requiredMessage="#{bundle['accountEdit.emailAddress.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.emailAddress.validationMessage']}">
                    <f:validateLength minimum="3" maximum="254"/>
                    <f:validateRegex
                            pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                </h:inputText>
                <h:message for="emailAddress" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="phoneNumber"
                               styleClass="form-label">#{bundle['accountEdit.phoneNumber.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.phoneNumber}"
                             id="phoneNumber"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="true"
                             requiredMessage="#{bundle['accountEdit.phoneNumber.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.phoneNumber.validationMessage']}">
                    <f:validateLength minimum="8" maximum="16"/>
                    <f:validateRegex
                            pattern="^([+]?[\d]+)?$" />
                </h:inputText>
                <h:message for="phoneNumber" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="coachDegreeInfo"
                               styleClass="form-label">#{bundle['accountEdit.coachDegreeInfo.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.coachDegreeInfo}"
                             id="coachDegreeInfo"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="false"
                             requiredMessage="#{bundle['accountEdit.coachDegreeInfo.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.coachDegreeInfo.validationMessage']}">
                    <f:validateLength minimum="1" maximum="2000"/>
                </h:inputText>
                <h:message for="coachDegreeInfo" styleClass="invalid-feedback"/>
            </div>
            <div class="mb-3">
                <h:outputLabel for="coachCareerStartDate"
                               styleClass="form-label">#{bundle['accountEdit.coachCareerStartDate.inputLabel']}</h:outputLabel>
                <h:inputText value="#{personalAccount.userToEdit.coachCareerStartDate}"
                             a:type="date"
                             a:min="1900-01-01"
                             a:max="#{personalAccount.today}"
                             id="coachCareerStartDate"
                             styleClass="#{component.valid ? 'form-control' : 'form-control is-invalid'}"
                             required="false"
                             requiredMessage="#{bundle['accountEdit.coachCareerStartDate.requiredMessage']}"
                             validatorMessage="#{bundle['accountEdit.coachCareerStartDate.validationMessage']}">
                    <f:convertDateTime type="localDate" pattern="yyyy-MM-dd"/>
                </h:inputText>
                <h:message for="coachCareerStartDate" styleClass="invalid-feedback"/>
            </div>
            <div id="submitBtn"  class="textPlacement">
                <h:commandButton styleClass="btn btn-primary"
                                 type="submit"
                                 value="#{bundle['accountEdit.submitButton']}"
                                 action="#{personalAccount.saveEdit}" />
            </div>
        </h:form>
    </ui:define>
</ui:composition>
</html>
